{"ast":null,"code":"import _createForOfIteratorHelper from\"C:/Users/Martin/R_2021/memory/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _toConsumableArray from\"C:/Users/Martin/R_2021/memory/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"C:/Users/Martin/R_2021/memory/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/Martin/R_2021/memory/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useCallback}from'react';import MemoryCard from'../../components/MemoryCard/MemoryCard';import Backdrop from'../../components/Backdrop/Backdrop';import OpenCard from'../../components/OpenCard/OpenCard';import NoMatchCard from'../../components/NoMatchCard/NoMatchCard';import classes from'./Memory.module.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Memory=function Memory(props){var _useState=useState(props.cards),_useState2=_slicedToArray(_useState,2),cards=_useState2[0],setCards=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),revealedCards=_useState4[0],setRevealedCards=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),isMatch=_useState6[0],setIsMatch=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),focusedCard=_useState8[0],setFocusedCard=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),showBackdrop=_useState10[0],setShowBackdrop=_useState10[1];var _useState11=useState(),_useState12=_slicedToArray(_useState11,2),isNoMatch=_useState12[0],setIsNoMatch=_useState12[1];var isOver=props.isOver,finish=props.finish;var allPairsFound=cards.filter(function(card){return!card.pairFound;}).length===0;//   Häh?\nuseEffect(function(){},[cards]);var cardCover=useCallback(function(){setRevealedCards(0);var updatedCards=cards.map(function(card){return _objectSpread(_objectSpread({},card),{},{revealed:card.pairFound});});setCards(updatedCards);},[cards,setCards,setRevealedCards]);useEffect(function(){return cardCover();},[]);var blurCard=useCallback(function(){console.log('blurCard');setIsMatch(false);setIsNoMatch(false);setTimeout(function(){setShowBackdrop(false);setFocusedCard(null);},500);setTimeout(function(){cardCover();},400);// checking if all pairs are found\nif(cards.filter(function(card){return!card.pairFound;}).length===0){return props.onFinish();}},[revealedCards,cards,isOver,finish,setIsMatch,setShowBackdrop,setFocusedCard,cardCover]);var cardClickHandler=function cardClickHandler(cardId){if(focusedCard&&focusedCard.id===cardId){// same card got clicked twice\nreturn;}if(revealedCards>=2){return;}setRevealedCards(function(prevRevealedCards){return prevRevealedCards+1;});props.increaseCount();setFocusedCard(cards.find(function(card){return card.id===cardId;}));var updatedCards=_toConsumableArray(cards);var selectedCardIndex=updatedCards.findIndex(function(card){return card.id===cardId;});var selectedCard=updatedCards[selectedCardIndex];selectedCard.revealed=true;updatedCards[selectedCardIndex]=selectedCard;setCards(updatedCards);// checking both revealed cards for pairing\nif(revealedCards===1){var visibleCards=updatedCards.filter(function(card){return card.revealed&&!card.pairFound;});if(visibleCards[0].pairId===visibleCards[1].pairId){var _iterator=_createForOfIteratorHelper(visibleCards),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var card=_step.value;card.pairFound=true;}}catch(err){_iterator.e(err);}finally{_iterator.f();}setTimeout(function(){setRevealedCards(0);setShowBackdrop(true);return setIsMatch(true);},1000);}else{setTimeout(function(){setIsNoMatch(true);setShowBackdrop(true);},1400);}}};var renderedCards=cards.map(function(card){return/*#__PURE__*/_jsx(MemoryCard,{card:card,clickHandler:cardClickHandler,disabled:revealedCards>=2,cards:cards},card.id);});if(!props.show){return null;}return/*#__PURE__*/_jsxs(\"div\",{className:classes.memorycards,children:[!props.isOver&&renderedCards,/*#__PURE__*/_jsx(Backdrop,{show:showBackdrop}),/*#__PURE__*/_jsx(OpenCard,{show:isMatch,card:focusedCard,cardsMatch:isMatch,onClose:blurCard,allPairsFound:allPairsFound}),isNoMatch&&/*#__PURE__*/_jsx(NoMatchCard,{onClose:blurCard})]});};export default Memory;","map":{"version":3,"sources":["C:/Users/Martin/R_2021/memory/src/pages/Memory/Memory.js"],"names":["React","useState","useEffect","useCallback","MemoryCard","Backdrop","OpenCard","NoMatchCard","classes","Memory","props","cards","setCards","revealedCards","setRevealedCards","isMatch","setIsMatch","focusedCard","setFocusedCard","showBackdrop","setShowBackdrop","isNoMatch","setIsNoMatch","isOver","finish","allPairsFound","filter","card","pairFound","length","cardCover","updatedCards","map","revealed","blurCard","console","log","setTimeout","onFinish","cardClickHandler","cardId","id","prevRevealedCards","increaseCount","find","selectedCardIndex","findIndex","selectedCard","visibleCards","pairId","renderedCards","show","memorycards"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\n\r\nimport MemoryCard from '../../components/MemoryCard/MemoryCard';\r\nimport Backdrop from '../../components/Backdrop/Backdrop';\r\nimport OpenCard from '../../components/OpenCard/OpenCard';\r\nimport NoMatchCard from '../../components/NoMatchCard/NoMatchCard';\r\n\r\nimport classes from './Memory.module.css';\r\n\r\nconst Memory = (props) => {\r\n  const [cards, setCards] = useState(props.cards);\r\n  const [revealedCards, setRevealedCards] = useState(0);\r\n  const [isMatch, setIsMatch] = useState();\r\n  const [focusedCard, setFocusedCard] = useState();\r\n  const [showBackdrop, setShowBackdrop] = useState();\r\n  const [isNoMatch, setIsNoMatch] = useState();\r\n\r\n  const { isOver, finish } = props;\r\n\r\n  let allPairsFound = cards.filter((card) => !card.pairFound).length === 0;\r\n\r\n  //   Häh?\r\n  useEffect(() => {}, [cards]);\r\n\r\n  const cardCover = useCallback(() => {\r\n    setRevealedCards(0);\r\n    const updatedCards = cards.map((card) => {\r\n      return {\r\n        ...card,\r\n        revealed: card.pairFound,\r\n      };\r\n    });\r\n    setCards(updatedCards);\r\n  }, [cards, setCards, setRevealedCards]);\r\n\r\n  useEffect(() => {\r\n    return cardCover();\r\n  }, []);\r\n\r\n  const blurCard = useCallback(() => {\r\n    console.log('blurCard');\r\n    setIsMatch(false);\r\n    setIsNoMatch(false);\r\n    setTimeout(() => {\r\n      setShowBackdrop(false);\r\n      setFocusedCard(null);\r\n    }, 500);\r\n\r\n    setTimeout(() => {\r\n      cardCover();\r\n    }, 400);\r\n    // checking if all pairs are found\r\n    if (cards.filter((card) => !card.pairFound).length === 0) {\r\n      return props.onFinish();\r\n    }\r\n  }, [\r\n    revealedCards,\r\n    cards,\r\n    isOver,\r\n    finish,\r\n    setIsMatch,\r\n    setShowBackdrop,\r\n    setFocusedCard,\r\n    cardCover,\r\n  ]);\r\n\r\n  const cardClickHandler = (cardId) => {\r\n    if (focusedCard && focusedCard.id === cardId) {\r\n      // same card got clicked twice\r\n      return;\r\n    }\r\n    if (revealedCards >= 2) {\r\n      return;\r\n    }\r\n    setRevealedCards((prevRevealedCards) => prevRevealedCards + 1);\r\n    props.increaseCount();\r\n\r\n    setFocusedCard(cards.find((card) => card.id === cardId));\r\n    const updatedCards = [...cards];\r\n    const selectedCardIndex = updatedCards.findIndex(\r\n      (card) => card.id === cardId\r\n    );\r\n    const selectedCard = updatedCards[selectedCardIndex];\r\n    selectedCard.revealed = true;\r\n    updatedCards[selectedCardIndex] = selectedCard;\r\n\r\n    setCards(updatedCards);\r\n\r\n    // checking both revealed cards for pairing\r\n\r\n    if (revealedCards === 1) {\r\n      const visibleCards = updatedCards.filter(\r\n        (card) => card.revealed && !card.pairFound\r\n      );\r\n      if (visibleCards[0].pairId === visibleCards[1].pairId) {\r\n        for (const card of visibleCards) {\r\n          card.pairFound = true;\r\n        }\r\n        setTimeout(() => {\r\n          setRevealedCards(0);\r\n          setShowBackdrop(true);\r\n          return setIsMatch(true);\r\n        }, 1000);\r\n      } else {\r\n        setTimeout(() => {\r\n          setIsNoMatch(true);\r\n          setShowBackdrop(true);\r\n        }, 1400);\r\n      }\r\n    }\r\n  };\r\n\r\n  const renderedCards = cards.map((card) => {\r\n    return (\r\n      <MemoryCard\r\n        card={card}\r\n        key={card.id}\r\n        clickHandler={cardClickHandler}\r\n        disabled={revealedCards >= 2}\r\n        cards={cards}\r\n      />\r\n    );\r\n  });\r\n\r\n  if (!props.show) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className={classes.memorycards}>\r\n      {!props.isOver && renderedCards}\r\n      <Backdrop show={showBackdrop} />\r\n      <OpenCard\r\n        show={isMatch}\r\n        card={focusedCard}\r\n        cardsMatch={isMatch}\r\n        onClose={blurCard}\r\n        allPairsFound={allPairsFound}\r\n      />\r\n      {isNoMatch && <NoMatchCard onClose={blurCard} />}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Memory;\r\n"]},"metadata":{},"sourceType":"module"}